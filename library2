enum BookStatus { AVAILABLE, LOANED, LOST }
enum UserRole { LIBRARIAN, MEMBER }

//Các trường của sách
CLASS BOOK 
private:
  int m_book_id
  string m_ISBN
  string m_title
  string m_author
  string m_publisher
  date m_year
  string m_genre
  string m_language
END CLASS

//Các trường của 1 bản vật lý của sách
CLASS BOOKCOPY 
private:
  int m_book_id // Foreign key to BOOK
  string m_barcode
  string m_shelf_location
  status m_book_status 
END CLASS

// Các trường của 1 người dùng
CLASS LIBRARYUSER 
private:
  int m_user_id
  string m_full_name
  string m_email
  string m_password_hash
  date m_created_at
END CLASS

// Các trường của 1 thẻ mượn
CLASS BORROWINGCARD 
private:
  int m_card_id
  int m_user_id
  int m_barcode
  date m_borrow_date
  date m_due_date
  date m_return_date
  int m_extensions_used
  int m_fine_amount

public:
  // Kiểm tra quá hạn 
  method boolean isOverdue(date current_date) {}
  END METHOD

  // Kiểm tra có thể gia hạn được không 
  method boolean canExtend(int max_extensions) {}
  END METHOD

  //Tính tiền phạt
  method int calculateFine(int fine_amount) {}
  END METHOD

END CLASS

CLASS BookManager
private:
  list<BOOK> books
  list<BOOKCOPY> book_copies

public:
  //ADD BOOKS
  method void addBook(string isbn, string title, string author, string publisher, date year, string genre, string language) {}
  END METHOD

  //Add copy of books
  method void addBookCopy(int book_id, string barcode, string shelf_location) {} 
  END METHOD
  
  //EDIT BOOKS
  method boolean editBook(string new_title, string new_author, string new_publisher, date new_year, string new_genre, string new_language) {}
  END METHOD

  //DELETE BOOKS  
  method boolean deleteBook(int book_id) {}
  END METHOD

  //SEARCH & SORT
  //Chuyển về chữ thường
  method string toLowerCase(string str) {}
  END METHOD

  //Tìm theo từ khóa
  method list<BOOK> searchByKeyword(string keyword) {}
  END METHOD

  method void searchByAuthor(string author) {}
  END METHOD

  method void searchByTitle(string title) {}
  END METHOD
  
  method void searchByGenre(string genre) {}
  END METHOD

  method void searchByPublisher(string publisher) {}
  END METHOD
  
END CLASS

CLASS UserManager 
private:
  list<LIBRARYUSER> users

public:
  method void registerUser(string full_name, string email, string password) {}
  END method

  method void sendOTP(string email) {}
  END method

  //Login Users
  method void loginUser(string email, string password) {}
  END METHOD
  
  //Change Password
  method void changePassword(int user_id, string old_password, string new_password) {}
  END METHOD

  //Check Librarian Role
  method boolean isLibrarian(int user_id) {}
  END METHOD

  //EDIT Users
  method boolean editUser(int user_id, string full_name, string email, string password) {}
  END METHOD

  //DELETE Users
  method boolean deleteUser(int user_id) {}
  END METHOD
  
END CLASS

CLASS BorrowingManager
private:
  list<BORROWINGCARD> borrowing_cards

public:
  // Tạo mới thẻ mượn sách
  method boolean borrowBook(int user_id, string barcode, date due_date) {}
  END METHOD

  // Cập nhật trả sách 
  method boolean returnBook(string barcode, date return_date) {}
  END METHOD

  // Gia hạn ngày trả sách
  method boolean extendDueDate(int card_id, date new_due_date, int max_extensions) {}
  END METHOD
  
  //Lịch sử mượn sách của người dùng
  method list<BORROWINGCARD> getUserBorrowingHistory(int user_id) {}
  END method
  
  // TÍnh tổng tiền phạt của người dùng
  method int calculateUserTotalFines(int user_id, int daily_rate) {}
  END method

END CLASS

